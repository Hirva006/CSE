<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Travelo ‚Äî Packages</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    .package-card {
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .package-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.2);
    }
  </style>
</head>

<body class="bg-gray-50 text-gray-800">

  <!-- HEADER -->
  <header class="bg-white shadow transition-colors duration-300">
    <div class="container mx-auto px-6 py-4 flex items-center justify-between">
      <a href="index.html" class="text-2xl font-bold text-indigo-600">Travelo</a>
      <nav class="hidden md:flex gap-6 items-center">
        <a href="index.html" class="hover:text-indigo-600">Home</a>
        <a href="flights.html" class="hover:text-indigo-600">Flights</a>
        <a href="hotels.html" class="hover:text-indigo-600">Hotels</a>
        <a href="packages.html" class="hover:text-indigo-600">Packages</a>
        <a href="contact.html" class="hover:text-indigo-600">Contact</a>
      </nav>
      <div class="flex items-center gap-4">
        <button id="themeToggle"
          class="p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 flex items-center justify-center"
          aria-label="Toggle dark mode">
          <svg id="sunIcon" class="w-5 h-5 text-gray-800 transition-colors duration-200" fill="currentColor"
            viewBox="0 0 20 20">
            <path fill-rule="evenodd"
              d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
              clip-rule="evenodd"></path>
          </svg>
          <svg id="moonIcon" class="w-5 h-5 text-gray-800 hidden transition-colors duration-200" fill="currentColor"
            viewBox="0 0 20 20">
            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
          </svg>
        </button>
        <a href="admin/login.html"
          class="text-sm px-3 py-2 rounded border border-indigo-600 text-indigo-600 hover:bg-indigo-50">Admin</a>
        <button id="mobileMenuBtn" class="md:hidden p-2 rounded bg-gray-100">‚ò∞</button>
      </div>
    </div>
    <!-- Mobile menu -->
    <div id="mobileMenu" class="hidden md:hidden bg-white border-t transition-colors duration-300">
      <div class="px-6 py-3 flex flex-col gap-2">
        <a href="index.html">Home</a>
        <a href="flights.html">Flights</a>
        <a href="hotels.html">Hotels</a>
        <a href="packages.html">Packages</a>
        <a href="contact.html">Contact</a>
      </div>
    </div>
  </header>

  <main class="container mx-auto px-6 py-10">
    <h1 class="text-3xl font-bold mb-6">Holiday Packages</h1>

    <div id="packagesContainer" class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Package Card 1 -->
      <div class="package-card bg-white rounded shadow overflow-hidden">
        <div class="h-64 bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1502602898657-3e91760cbb34?auto=format&fit=crop&w=800&q=80')"></div>
        <div class="p-4">
          <h3 class="font-semibold text-gray-900">Romantic Paris - 5 Days</h3>
          <p class="text-sm text-gray-600 mt-1">Flights + 4‚òÖ hotel + city tour</p>
          <div class="flex items-center gap-2 mt-2 text-xs text-gray-500">
            <span>‚úàÔ∏è Flights</span>
            <span>üè® Hotel</span>
            <span>üé´ Tours</span>
          </div>
          <div class="mt-4 flex justify-between items-center">
            <div class="text-xl font-bold text-indigo-600">‚Çπ28,999</div>
            <button class="book-package-btn px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition"
                    data-name="Romantic Paris - 5 Days"
                    data-destination="Paris, France"
                    data-duration="5 Days / 4 Nights"
                    data-price="28999"
                    data-includes="Flights + 4‚òÖ Hotel + City Tour + Meals">Book Now</button>
          </div>
        </div>
      </div>

      <!-- Package Card 2 -->
      <div class="package-card bg-white rounded shadow overflow-hidden">
        <div class="h-64 bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1537996194471-e657df975ab4?auto=format&fit=crop&w=800&q=80')"></div>
        <div class="p-4">
          <h3 class="font-semibold text-gray-900">Bali Escape - 7 Days</h3>
          <p class="text-sm text-gray-600 mt-1">Hotel + transfers + sightseeing</p>
          <div class="flex items-center gap-2 mt-2 text-xs text-gray-500">
            <span>üè® Hotel</span>
            <span>üöó Transfers</span>
            <span>üèñÔ∏è Beach</span>
          </div>
          <div class="mt-4 flex justify-between items-center">
            <div class="text-xl font-bold text-indigo-600">‚Çπ39,999</div>
            <button class="book-package-btn px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition"
                    data-name="Bali Escape - 7 Days"
                    data-destination="Bali, Indonesia"
                    data-duration="7 Days / 6 Nights"
                    data-price="39999"
                    data-includes="4‚òÖ Hotel + Transfers + Sightseeing + Activities">Book Now</button>
          </div>
        </div>
      </div>

      <!-- Package Card 3 -->
      <div class="package-card bg-white rounded shadow overflow-hidden">
        <div class="h-64 bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1451337516015-6b6e9a44a8a3?auto=format&fit=crop&w=800&q=80')"></div>
        <div class="p-4">
          <h3 class="font-semibold text-gray-900">Desert Adventure - 3 Days</h3>
          <p class="text-sm text-gray-600 mt-1">Stay + desert safari</p>
          <div class="flex items-center gap-2 mt-2 text-xs text-gray-500">
            <span>üè® Stay</span>
            <span>üê™ Safari</span>
            <span>‚≠ê Camp</span>
          </div>
          <div class="mt-4 flex justify-between items-center">
            <div class="text-xl font-bold text-indigo-600">‚Çπ12,999</div>
            <button class="book-package-btn px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition"
                    data-name="Desert Adventure - 3 Days"
                    data-destination="Dubai, UAE"
                    data-duration="3 Days / 2 Nights"
                    data-price="12999"
                    data-includes="Hotel + Desert Safari + BBQ Dinner + Activities">Book Now</button>
          </div>
        </div>
      </div>

      <!-- Package Card 4 -->
      <div class="package-card bg-white rounded shadow overflow-hidden">
        <div class="h-64 bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1524492412937-b28074a5d7da?auto=format&fit=crop&w=800&q=80')"></div>
        <div class="p-4">
          <h3 class="font-semibold text-gray-900">India Paradise - 6 Days</h3>
          <p class="text-sm text-gray-600 mt-1">Overwater villa + activities</p>
          <div class="flex items-center gap-2 mt-2 text-xs text-gray-500">
            <span>‚úàÔ∏è Flights</span>
            <span>üèùÔ∏è Villa</span>
            <span>ü§ø Diving</span>
          </div>
          <div class="mt-4 flex justify-between items-center">
            <div class="text-xl font-bold text-indigo-600">‚Çπ85,999</div>
            <button class="book-package-btn px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition"
                    data-name="Maldives Paradise - 6 Days"
                    data-destination="Maldives"
                    data-duration="6 Days / 5 Nights"
                    data-price="85999"
                    data-includes="Flights + Overwater Villa + All Meals + Water Sports">Book Now</button>
          </div>
        </div>
      </div>

      <!-- Package Card 5 -->
      <div class="package-card bg-white rounded shadow overflow-hidden">
        <div class="h-64 bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=800&q=80')"></div>
        <div class="p-4">
          <h3 class="font-semibold text-gray-900">Swiss Alps - 8 Days</h3>
          <p class="text-sm text-gray-600 mt-1">Mountain resort + skiing</p>
          <div class="flex items-center gap-2 mt-2 text-xs text-gray-500">
            <span>üèîÔ∏è Resort</span>
            <span>‚õ∑Ô∏è Skiing</span>
            <span>üö° Cable Car</span>
          </div>
          <div class="mt-4 flex justify-between items-center">
            <div class="text-xl font-bold text-indigo-600">‚Çπ95,999</div>
            <button class="book-package-btn px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition"
                    data-name="Swiss Alps - 8 Days"
                    data-destination="Switzerland"
                    data-duration="8 Days / 7 Nights"
                    data-price="95999"
                    data-includes="Flights + Resort + Ski Pass + Tours + Meals">Book Now</button>
          </div>
        </div>
      </div>

      <!-- Package Card 6 -->
      <div class="package-card bg-white rounded shadow overflow-hidden">
        <div class="h-64 bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&w=800&q=80')"></div>
        <div class="p-4">
          <h3 class="font-semibold text-gray-900">Japan Explorer - 10 Days</h3>
          <p class="text-sm text-gray-600 mt-1">Multi-city tour package</p>
          <div class="flex items-center gap-2 mt-2 text-xs text-gray-500">
            <span>‚úàÔ∏è Flights</span>
            <span>üè® Hotels</span>
            <span>üõï Temples</span>
          </div>
          <div class="mt-4 flex justify-between items-center">
            <div class="text-xl font-bold text-indigo-600">‚Çπ52,999</div>
            <button class="book-package-btn px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition"
                    data-name="Thailand Explorer - 10 Days"
                    data-destination="Thailand"
                    data-duration="10 Days / 9 Nights"
                    data-price="52999"
                    data-includes="Flights + Hotels + Tours + Some Meals + Transfers">Book Now</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Booking Modal -->
  <div id="bookingModal" class="modal fade" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header bg-indigo-600 text-white">
          <h5 class="modal-title">üéÅ Complete Your Package Booking</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Package Details -->
          <div class="mb-4 p-4 bg-indigo-50 rounded-lg border border-indigo-200">
            <h6 class="font-semibold mb-3 text-indigo-900">Package Details</h6>
            <div class="space-y-2 text-sm">
              <div class="flex justify-between">
                <span class="text-gray-600">Package:</span>
                <span class="font-medium" id="modalPackageName"></span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-600">Destination:</span>
                <span class="font-medium" id="modalDestination"></span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-600">Duration:</span>
                <span class="font-medium" id="modalDuration"></span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-600">Travelers:</span>
                <span class="font-medium" id="modalTravelers"></span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-600">Departure Date:</span>
                <span class="font-medium" id="modalDepartureDate"></span>
              </div>
              <hr class="my-2">
              <div class="text-xs text-gray-600 mb-2">
                <strong>Includes:</strong><br>
                <span id="modalIncludes"></span>
              </div>
              <hr class="my-2">
              <div class="flex justify-between text-lg">
                <span class="font-bold text-gray-800">Total Price:</span>
                <span class="font-bold text-indigo-600" id="modalTotalPrice"></span>
              </div>
            </div>
          </div>

          <!-- Traveler Information Form -->
          <form id="travelerForm">
            <h6 class="font-semibold mb-3">Lead Traveler Information</h6>
            <div class="mb-3">
              <label class="form-label text-sm">Full Name *</label>
              <input type="text" class="form-control" id="travelerName" placeholder="Enter full name" required>
            </div>
            <div class="mb-3">
              <label class="form-label text-sm">Email *</label>
              <input type="email" class="form-control" id="travelerEmail" placeholder="your@email.com" required>
            </div>
            <div class="mb-3">
              <label class="form-label text-sm">Phone Number *</label>
              <input type="tel" class="form-control" id="travelerPhone" placeholder="+91 XXXXX XXXXX" required>
            </div>
            <div class="mb-3">
              <label class="form-label text-sm">Number of Travelers *</label>
              <select class="form-control" id="numTravelers" required>
                <option value="1">1 Person</option>
                <option value="2">2 People</option>
                <option value="3">3 People</option>
                <option value="4">4 People</option>
                <option value="5">5 People</option>
                <option value="6">6 People</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label text-sm">Preferred Departure Date *</label>
              <input type="date" class="form-control" id="departureDate" required>
            </div>
            <div class="mb-3">
              <label class="form-label text-sm">Special Requests</label>
              <textarea class="form-control" id="specialRequests" rows="2" placeholder="Any special requirements? (Optional)"></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary bg-indigo-600 border-indigo-600" id="confirmBookingBtn">
            <span id="confirmBtnText">Proceed to Payment</span>
            <span id="confirmBtnLoader" class="hidden">
              <span class="spinner-border spinner-border-sm me-2" role="status"></span>
              Processing...
            </span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-white border-t mt-12">
    <div class="container mx-auto px-6 py-8 grid grid-cols-1 md:grid-cols-3 gap-6">
      <div>
        <h4 class="font-bold text-indigo-600">Travelo</h4>
        <p class="text-sm text-gray-600 mt-2">Explore. Plan. Book.</p>
      </div>
      <div>
        <h5 class="font-semibold">Quick Links</h5>
        <ul class="mt-2 space-y-1 text-sm">
          <li><a href="flights.html" class="hover:text-indigo-600">Flights</a></li>
          <li><a href="hotels.html" class="hover:text-indigo-600">Hotels</a></li>
          <li><a href="packages.html" class="hover:text-indigo-600">Packages</a></li>
        </ul>
      </div>
      <div>
        <h5 class="font-semibold">Contact</h5>
        <p class="text-sm mt-2">support@travelo.example<br />+1 234 567 890</p>
      </div>
    </div>
    <div class="text-center text-sm py-4 border-t bg-gray-50">¬© Travelo</div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/script.js"></script>
  <script>
    let selectedPackage = {};

    function attachBookButtonListeners() {
      document.querySelectorAll('.book-package-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const button = e.target;
          selectedPackage = {
            name: button.dataset.name,
            destination: button.dataset.destination,
            duration: button.dataset.duration,
            price: button.dataset.price,
            includes: button.dataset.includes
          };
          openBookingModal();
        });
      });
    }

    function openBookingModal() {
      // Populate modal
      document.getElementById('modalPackageName').textContent = selectedPackage.name;
      document.getElementById('modalDestination').textContent = selectedPackage.destination;
      document.getElementById('modalDuration').textContent = selectedPackage.duration;
      document.getElementById('modalIncludes').textContent = selectedPackage.includes;
      
      // Get form values or defaults
      const numTravelers = document.getElementById('numTravelers').value || '1';
      const departureDate = document.getElementById('departureDate').value || '';
      
      document.getElementById('modalTravelers').textContent = `${numTravelers} ${numTravelers === '1' ? 'Person' : 'People'}`;
      document.getElementById('modalDepartureDate').textContent = departureDate ? formatDate(departureDate) : 'To be selected';
      
      const totalPrice = parseInt(selectedPackage.price) * parseInt(numTravelers);
      document.getElementById('modalTotalPrice').textContent = `‚Çπ${totalPrice.toLocaleString('en-IN')}`;

      const modal = new bootstrap.Modal(document.getElementById('bookingModal'));
      modal.show();

      setTimeout(() => {
        const isDark = document.documentElement.classList.contains('dark');
        const modalContent = document.querySelector('#bookingModal .modal-content');
        if (modalContent) {
          if (isDark) {
            applyDarkModeToModal(modalContent);
          } else {
            applyLightModeToModal(modalContent);
          }
        }
      }, 100);
    }

    // Update modal when travelers or date changes
    document.getElementById('numTravelers').addEventListener('change', updateModalPricing);
    document.getElementById('departureDate').addEventListener('change', updateModalPricing);

    function updateModalPricing() {
      const numTravelers = document.getElementById('numTravelers').value;
      const departureDate = document.getElementById('departureDate').value;
      
      document.getElementById('modalTravelers').textContent = `${numTravelers} ${numTravelers === '1' ? 'Person' : 'People'}`;
      document.getElementById('modalDepartureDate').textContent = departureDate ? formatDate(departureDate) : 'To be selected';
      
      const totalPrice = parseInt(selectedPackage.price) * parseInt(numTravelers);
      document.getElementById('modalTotalPrice').textContent = `‚Çπ${totalPrice.toLocaleString('en-IN')}`;
    }

    function formatDate(dateStr) {
      const date = new Date(dateStr);
      const options = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' };
      return date.toLocaleDateString('en-IN', options);
    }

    // Confirm booking
    document.getElementById('confirmBookingBtn').addEventListener('click', () => {
      const form = document.getElementById('travelerForm');
      
      if (!form.checkValidity()) {
        form.reportValidity();
        return;
      }

      const name = document.getElementById('travelerName').value;
      const numTravelers = document.getElementById('numTravelers').value;
      const departureDate = document.getElementById('departureDate').value;

      document.getElementById('confirmBtnText').classList.add('hidden');
      document.getElementById('confirmBtnLoader').classList.remove('hidden');
      document.getElementById('confirmBookingBtn').disabled = true;

      setTimeout(() => {
        const bookingModal = bootstrap.Modal.getInstance(document.getElementById('bookingModal'));
        bookingModal.hide();

        document.getElementById('confirmBtnText').classList.remove('hidden');
        document.getElementById('confirmBtnLoader').classList.add('hidden');
        document.getElementById('confirmBookingBtn').disabled = false;

        const bookingRef = 'PKG' + Math.random().toString(36).substr(2, 9).toUpperCase();

        setTimeout(() => {
          showSuccessDialog(bookingRef, name, numTravelers, departureDate);
        }, 300);

        form.reset();
      }, 2000);
    });

    function showSuccessDialog(bookingRef, travelerName, numTravelers, departureDate) {
      const isDark = document.documentElement.classList.contains('dark');
      
      const modalBgColor = isDark ? '#1f2937' : '#ffffff';
      const textColorStyle = isDark ? '#f3f4f6' : '#1f2937';
      const textSecondaryStyle = isDark ? '#d1d5db' : '#4b5563';
      const textMutedStyle = isDark ? '#9ca3af' : '#6b7280';
      const cardBgColor = isDark ? '#374151' : '#f9fafb';
      const detailBgColor = isDark ? '#312e81' : '#eef2ff';

      const totalPrice = parseInt(selectedPackage.price) * parseInt(numTravelers);

      const dialog = document.createElement('div');
      dialog.className = 'modal fade';
      dialog.style.display = 'block';
      dialog.style.backgroundColor = 'rgba(0, 0, 0, 0.5)';
      dialog.innerHTML = `
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content border-0 shadow-lg" style="background-color: ${modalBgColor};">
            <div class="modal-body text-center p-5">
              <div class="mb-4">
                <div class="mx-auto bg-green-100 rounded-full p-3" style="width: 80px; height: 80px; display: flex; align-items: center; justify-content: center;">
                  <svg class="text-green-600" style="width: 48px; height: 48px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                  </svg>
                </div>
              </div>
              <h3 class="text-2xl font-bold mb-3" style="color: ${textColorStyle};">Package Booked! üéÅ</h3>
              <p class="mb-4" style="color: ${textSecondaryStyle};">Your holiday package has been successfully confirmed.</p>
              <div class="rounded-lg p-4 mb-4" style="background-color: ${detailBgColor};">
                <p class="text-sm mb-1" style="color: ${textSecondaryStyle};">Booking Reference</p>
                <p class="text-2xl font-bold" style="color: #4f46e5;">${bookingRef}</p>
              </div>
              <div class="text-left rounded-lg p-4 mb-4 text-sm" style="background-color: ${cardBgColor};">
                <p class="mb-2" style="color: ${textColorStyle};"><strong>Lead Traveler:</strong> ${travelerName}</p>
                <p class="mb-2" style="color: ${textColorStyle};"><strong>Package:</strong> ${selectedPackage.name}</p>
                <p class="mb-2" style="color: ${textColorStyle};"><strong>Destination:</strong> ${selectedPackage.destination}</p>
                <p class="mb-2" style="color: ${textColorStyle};"><strong>Travelers:</strong> ${numTravelers} ${numTravelers === '1' ? 'Person' : 'People'}</p>
                <p class="mb-2" style="color: ${textColorStyle};"><strong>Departure:</strong> ${formatDate(departureDate)}</p>
                <p style="color: ${textColorStyle};"><strong>Total Paid:</strong> ‚Çπ${totalPrice.toLocaleString('en-IN')}</p>
              </div>
              <p class="text-sm mb-4" style="color: ${textMutedStyle};">A detailed itinerary and booking voucher has been sent to your registered email address.</p>
              <button onclick="closeSuccessDialog()" class="btn btn-primary px-6 py-2" style="background-color: #4f46e5; border-color: #4f46e5; color: white;">Close</button>
            </div>
          </div>
        </div>
      `;
      document.body.appendChild(dialog);

      setTimeout(() => {
        dialog.classList.add('show');
      }, 10);

      alert(`üéÅ Package Booking Successful!\n\nYour booking reference is: ${bookingRef}\n\nThank you for choosing Travelo!`);
    }

    window.closeSuccessDialog = function() {
      const dialogs = document.querySelectorAll('.modal.show');
      dialogs.forEach(dialog => {
        dialog.classList.remove('show');
        setTimeout(() => dialog.remove(), 300);
      });
    };

    function applyDarkModeToModal(modalContent) {
      modalContent.classList.remove('bg-white');
      modalContent.classList.add('bg-gray-800');

      const detailsCard = modalContent.querySelector('.bg-indigo-50');
      if (detailsCard) {
        detailsCard.classList.remove('bg-indigo-50', 'border-indigo-200');
        detailsCard.classList.add('bg-gray-700', 'border-gray-600');
        
        const heading = detailsCard.querySelector('h6');
        if (heading) {
          heading.classList.remove('text-indigo-900');
          heading.classList.add('text-gray-100');
        }
        
        detailsCard.querySelectorAll('.text-gray-600').forEach(span => {
          span.classList.remove('text-gray-600');
          span.classList.add('text-gray-300');
        });
        
        detailsCard.querySelectorAll('.font-medium').forEach(span => {
          span.classList.add('text-gray-100');
        });
        
        detailsCard.querySelectorAll('.font-bold').forEach(span => {
          if (span.classList.contains('text-gray-800')) {
            span.classList.remove('text-gray-800');
            span.classList.add('text-gray-100');
          }
        });
      }

      modalContent.querySelectorAll('h6').forEach(h6 => {
        if (!h6.closest('.bg-indigo-50') && !h6.closest('.bg-gray-700')) {
          h6.classList.add('text-gray-100');
        }
      });

      modalContent.querySelectorAll('.form-label').forEach(label => {
        label.classList.remove('text-gray-700');
        label.classList.add('text-gray-300');
      });

      modalContent.querySelectorAll('input, select, textarea').forEach(input => {
        input.classList.add('bg-gray-700', 'border-gray-600', 'text-gray-100');
        input.style.colorScheme = 'dark';
      });

      const modalFooter = modalContent.querySelector('.modal-footer');
      if (modalFooter) {
        modalFooter.classList.remove('bg-white');
        modalFooter.classList.add('bg-gray-700');
      }
    }

    function applyLightModeToModal(modalContent) {
      modalContent.classList.remove('bg-gray-800');
      modalContent.classList.add('bg-white');

      const detailsCard = modalContent.querySelector('.bg-gray-700, .bg-indigo-900, .bg-indigo-50');
      if (detailsCard) {
        detailsCard.classList.remove('bg-indigo-900', 'border-indigo-700', 'bg-gray-700', 'border-gray-600');
        detailsCard.classList.add('bg-indigo-50', 'border-indigo-200');
        
        const heading = detailsCard.querySelector('h6');
        if (heading) {
          heading.classList.remove('text-indigo-100', 'text-gray-100');
          heading.classList.add('text-indigo-900');
        }
        
        detailsCard.querySelectorAll('.text-indigo-200, .text-gray-300').forEach(span => {
          if (!span.classList.contains('font-medium') && !span.classList.contains('font-bold')) {
            span.classList.remove('text-indigo-200', 'text-gray-300');
            span.classList.add('text-gray-600');
          }
        });
        
        detailsCard.querySelectorAll('.font-medium').forEach(span => {
          span.classList.remove('text-indigo-100', 'text-gray-100');
        });
        
        detailsCard.querySelectorAll('.font-bold').forEach(span => {
          if (span.classList.contains('text-gray-100')) {
            span.classList.remove('text-gray-100');
            span.classList.add('text-gray-800');
          }
        });
      }

      modalContent.querySelectorAll('.form-label').forEach(label => {
        label.classList.remove('text-gray-300');
        label.classList.add('text-gray-700');
      });

      modalContent.querySelectorAll('h6').forEach(h6 => {
        if (!h6.closest('.bg-indigo-50')) {
          h6.classList.remove('text-gray-100');
          h6.classList.add('text-gray-800');
        }
      });

      modalContent.querySelectorAll('input, select, textarea').forEach(input => {
        input.classList.remove('bg-gray-700', 'border-gray-600', 'text-gray-100');
        input.style.colorScheme = 'light';
      });

      const modalFooter = modalContent.querySelector('.modal-footer');
      if (modalFooter) {
        modalFooter.classList.remove('bg-gray-700');
        modalFooter.classList.add('bg-white');
      }
    }

    // Theme observer
    const observer = new MutationObserver((mutations) => {
      mutations.forEach((mutation) => {
        if (mutation.attributeName === 'class') {
          const isDark = document.documentElement.classList.contains('dark');
          updatePageTheme(isDark);
        }
      });
    });

    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ['class']
    });

    const initialIsDark = document.documentElement.classList.contains('dark');
    updatePageTheme(initialIsDark);

    function updatePageTheme(isDark) {
      // Update package cards
      document.querySelectorAll('.package-card').forEach(card => {
        if (isDark) {
          card.classList.remove('bg-white');
          card.classList.add('bg-gray-800');
          
          card.querySelectorAll('.text-gray-900').forEach(el => {
            el.classList.remove('text-gray-900');
            el.classList.add('text-gray-100');
          });
          
          card.querySelectorAll('.text-gray-600').forEach(el => {
            el.classList.remove('text-gray-600');
            el.classList.add('text-gray-300');
          });

          card.querySelectorAll('.text-gray-500').forEach(el => {
            el.classList.remove('text-gray-500');
            el.classList.add('text-gray-400');
          });
        } else {
          card.classList.remove('bg-gray-800');
          card.classList.add('bg-white');
          
          card.querySelectorAll('.text-gray-100').forEach(el => {
            if (!el.classList.contains('text-indigo-600')) {
              el.classList.remove('text-gray-100');
              el.classList.add('text-gray-900');
            }
          });
          
          card.querySelectorAll('.text-gray-300').forEach(el => {
            el.classList.remove('text-gray-300');
            el.classList.add('text-gray-600');
          });

          card.querySelectorAll('.text-gray-400').forEach(el => {
            el.classList.remove('text-gray-400');
            el.classList.add('text-gray-500');
          });
        }
      });
    }

    // Initial setup
    attachBookButtonListeners();

    // Set minimum date to today
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('departureDate').setAttribute('min', today);
  </script>
</body>

</html>